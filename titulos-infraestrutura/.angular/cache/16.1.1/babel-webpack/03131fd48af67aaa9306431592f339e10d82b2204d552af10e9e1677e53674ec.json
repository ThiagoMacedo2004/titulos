{"ast":null,"code":"import { MAT_DIALOG_DATA } from '@angular/material/dialog';\nimport { Validators } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/material/dialog\";\nimport * as i2 from \"./../../services/titulos-services.service\";\nimport * as i3 from \"@angular/forms\";\nfunction DialogDetalheTituloComponent_tr_49_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\");\n    i0.ɵɵtext(6);\n    i0.ɵɵpipe(7, \"currency\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const row_r6 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(row_r6.num_cf);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(row_r6.nome_cf);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind2(7, 3, row_r6.valor_item_pg, \"BRL\"));\n  }\n}\nfunction DialogDetalheTituloComponent_div_51_tr_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵpipe(5, \"date\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"td\");\n    i0.ɵɵtext(7);\n    i0.ɵɵpipe(8, \"currency\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const row_r8 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"\", row_r8.parcela, \"\\u00BA\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind2(5, 3, row_r8.data_parcela, \"dd/MM/yyyy\"));\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind2(8, 6, row_r8.valor_parcela, \"BRL\"));\n  }\n}\nfunction DialogDetalheTituloComponent_div_51_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 17)(1, \"table\", 18)(2, \"thead\", 19)(3, \"th\");\n    i0.ɵɵtext(4, \"PARCELA\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"th\");\n    i0.ɵɵtext(6, \"DATA\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"th\");\n    i0.ɵɵtext(8, \"VALOR\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(9, \"tbody\");\n    i0.ɵɵtemplate(10, DialogDetalheTituloComponent_div_51_tr_10_Template, 9, 9, \"tr\", 20);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r4 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(10);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r4.parcelas);\n  }\n}\nfunction DialogDetalheTituloComponent_div_52_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 17)(1, \"table\", 18)(2, \"thead\", 19)(3, \"th\");\n    i0.ɵɵtext(4, \"PARCELA\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"th\");\n    i0.ɵɵtext(6, \"DATA\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"th\");\n    i0.ɵɵtext(8, \"VALOR\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(9, \"tbody\")(10, \"tr\")(11, \"td\");\n    i0.ɵɵtext(12, \"1\\u00BA\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"td\");\n    i0.ɵɵtext(14);\n    i0.ɵɵpipe(15, \"date\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(16, \"td\");\n    i0.ɵɵtext(17);\n    i0.ɵɵpipe(18, \"currency\");\n    i0.ɵɵelementEnd()()()()();\n  }\n  if (rf & 2) {\n    const ctx_r5 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(14);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind2(15, 2, ctx_r5.titulo.data_venc_tit, \"dd/MM/yyyy\"));\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind2(18, 5, ctx_r5.titulo.valor_tit, \"BRL\"));\n  }\n}\nexport let DialogDetalheTituloComponent = /*#__PURE__*/(() => {\n  class DialogDetalheTituloComponent {\n    constructor(dialogRef, _services, _fb, data) {\n      this.dialogRef = dialogRef;\n      this._services = _services;\n      this._fb = _fb;\n      this.data = data;\n      this.titulo = [];\n      this.contasFluxo = [];\n      this.parcelas = [];\n      this.objForm = {};\n    }\n    ngOnInit() {\n      this.titulo = this.data.row;\n      this.formulario();\n      this.getContasFluxo();\n      this.getParcelas();\n      console.log(this.titulo);\n    }\n    formulario() {\n      this.formGroup = this._fb.group({\n        nf: [this.titulo.nf_tit, Validators.required],\n        dt_emissao: [new Date(this.getData(this.titulo.data_emissao_tit)), Validators.required],\n        dt_vencimento: [new Date(this.getData(this.titulo.data_venc_tit)), Validators.required],\n        dt_entregue: [this.titulo.data_entregue ? new Date(this.getData(this.titulo.data_entregue)) : null, Validators.required]\n      });\n    }\n    editar(venc) {\n      let emissao = this.setData(this.formGroup.value.dt_emissao);\n      let vencimento = this.setData(this.formGroup.value.dt_vencimento);\n      let entregue = this.setData(this.formGroup.value.dt_entregue);\n      const obj = {\n        id: this.titulo.id_titulo,\n        nf: this.formGroup.value.nf,\n        dt_emissao: emissao,\n        dt_vencimento: vencimento,\n        dt_entregue: entregue\n      };\n      console.log(obj);\n      this._services.editarTitulo(JSON.stringify(obj)).subscribe(result => {\n        if (result.sucesso) {\n          this._services.exibirMsgSucesso('Título alterado com sucesso!');\n          this.fechar();\n        }\n      });\n    }\n    getData(date) {\n      if (date == null) {\n        return null;\n      }\n      let data = new Date(date);\n      let ano = data.getFullYear();\n      let mes = data.getUTCMonth() + 1;\n      let dia = data.getUTCDate();\n      if (dia === 1 && mes === 1) {\n        ano = ano + 1;\n      }\n      if (mes <= 9) {\n        mes = `0${mes}`;\n      }\n      if (dia <= 9) {\n        dia = `0${dia}`;\n      }\n      return `${ano},${mes},${dia}`;\n    }\n    setData(date) {\n      console.log(date);\n      if (!date) {\n        return null;\n      }\n      let data = new Date(date);\n      let ano = data.getFullYear();\n      let mes = data.getUTCMonth() + 1;\n      let dia = data.getUTCDate();\n      if (mes <= 9) {\n        mes = `0${mes}`;\n      }\n      if (dia <= 9) {\n        dia = `0${dia}`;\n      }\n      return `${ano}-${mes}-${dia}`;\n    }\n    fechar() {\n      this.dialogRef.close();\n    }\n    getContasFluxo() {\n      this._services.getDetalheContas(this.titulo.id_titulo).subscribe(data => {\n        console.log(data);\n        this.contasFluxo = data;\n      });\n    }\n    getParcelas() {\n      this._services.getParcelas(JSON.stringify(this.titulo)).subscribe(result => {\n        console.log(result);\n        this.parcelas = result;\n      });\n    }\n  }\n  DialogDetalheTituloComponent.ɵfac = function DialogDetalheTituloComponent_Factory(t) {\n    return new (t || DialogDetalheTituloComponent)(i0.ɵɵdirectiveInject(i1.MatDialogRef), i0.ɵɵdirectiveInject(i2.TitulosServicesService), i0.ɵɵdirectiveInject(i3.FormBuilder), i0.ɵɵdirectiveInject(MAT_DIALOG_DATA));\n  };\n  DialogDetalheTituloComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: DialogDetalheTituloComponent,\n    selectors: [[\"app-dialog-detalhe-titulo\"]],\n    decls: 59,\n    vars: 17,\n    consts: [[\"mat-dialog-title\", \"\"], [1, \"sub-title\"], [\"mat-matDialogContent\", \"\"], [1, \"linha-2\"], [3, \"formGroup\"], [\"appearance\", \"outline\"], [\"matInput\", \"\", \"type\", \"text\", \"formControlName\", \"nf\"], [\"matInput\", \"\", \"formControlName\", \"dt_emissao\", \"disabled\", \"\", 3, \"matDatepicker\"], [\"matSuffix\", \"\", 3, \"for\"], [\"disabled\", \"false\"], [\"dp3\", \"\"], [\"matInput\", \"\", \"formControlName\", \"dt_vencimento\", \"disabled\", \"\", 3, \"matDatepicker\"], [\"dp2\", \"\"], [\"matInput\", \"\", \"formControlName\", \"dt_entregue\", 3, \"matDatepicker\"], [\"dp1\", \"\"], [\"matInput\", \"\", \"type\", \"text\", \"readonly\", \"\", 3, \"value\"], [1, \"divisoria\"], [\"mat-dialog-content\", \"\", 1, \"content\"], [1, \"table\", \"table-sm\", \"table-striped\"], [1, \"thead-dark\"], [4, \"ngFor\", \"ngForOf\"], [\"mat-dialog-content\", \"\", \"class\", \"content\", 4, \"ngIf\"], [\"mat-dialog-actions\", \"\", \"align\", \"end\"], [\"mat-button\", \"\", \"color\", \"primary\", \"cdkFocusInitial\", \"\", 3, \"click\"], [1, \"material-symbols-outlined\"], [\"mat-button\", \"\", 3, \"click\"]],\n    template: function DialogDetalheTituloComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"h2\", 0);\n        i0.ɵɵtext(1);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(2, \"div\", 1)(3, \"h4\");\n        i0.ɵɵtext(4);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(5, \"div\", 2)(6, \"div\", 3)(7, \"form\", 4)(8, \"mat-form-field\", 5)(9, \"mat-label\");\n        i0.ɵɵtext(10, \"NF\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(11, \"input\", 6);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(12, \"mat-form-field\", 5)(13, \"mat-label\");\n        i0.ɵɵtext(14, \"Emiss\\u00E3o\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(15, \"input\", 7)(16, \"mat-datepicker-toggle\", 8)(17, \"mat-datepicker\", 9, 10);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(19, \"mat-form-field\", 5)(20, \"mat-label\");\n        i0.ɵɵtext(21, \"Vencimento\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(22, \"input\", 11)(23, \"mat-datepicker-toggle\", 8)(24, \"mat-datepicker\", 9, 12);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(26, \"mat-form-field\", 5)(27, \"mat-label\");\n        i0.ɵɵtext(28, \"Entregue\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(29, \"input\", 13)(30, \"mat-datepicker-toggle\", 8)(31, \"mat-datepicker\", 9, 14);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(33, \"mat-form-field\", 5)(34, \"mat-label\");\n        i0.ɵɵtext(35, \"Total\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(36, \"input\", 15);\n        i0.ɵɵpipe(37, \"currency\");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelement(38, \"div\", 16);\n        i0.ɵɵelementStart(39, \"div\", 17)(40, \"table\", 18)(41, \"thead\", 19)(42, \"th\");\n        i0.ɵɵtext(43, \"CONTA FLUXO\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(44, \"th\");\n        i0.ɵɵtext(45, \"NOME CONTA\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(46, \"th\");\n        i0.ɵɵtext(47, \"VALOR\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(48, \"tbody\");\n        i0.ɵɵtemplate(49, DialogDetalheTituloComponent_tr_49_Template, 8, 6, \"tr\", 20);\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelement(50, \"div\", 16);\n        i0.ɵɵtemplate(51, DialogDetalheTituloComponent_div_51_Template, 11, 1, \"div\", 21);\n        i0.ɵɵtemplate(52, DialogDetalheTituloComponent_div_52_Template, 19, 8, \"div\", 21);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(53, \"div\", 22)(54, \"button\", 23);\n        i0.ɵɵlistener(\"click\", function DialogDetalheTituloComponent_Template_button_click_54_listener() {\n          return ctx.editar(ctx.formGroup.value.dt_vencimento);\n        });\n        i0.ɵɵelementStart(55, \"span\", 24);\n        i0.ɵɵtext(56, \"edit\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(57, \"button\", 25);\n        i0.ɵɵlistener(\"click\", function DialogDetalheTituloComponent_Template_button_click_57_listener() {\n          return ctx.fechar();\n        });\n        i0.ɵɵtext(58, \"Fechar\");\n        i0.ɵɵelementEnd()();\n      }\n      if (rf & 2) {\n        const _r0 = i0.ɵɵreference(18);\n        const _r1 = i0.ɵɵreference(25);\n        const _r2 = i0.ɵɵreference(32);\n        i0.ɵɵadvance(1);\n        i0.ɵɵtextInterpolate2(\"\", ctx.titulo.nome_fornecedor, \" - (\", ctx.titulo.cod_fornecedor, \")\");\n        i0.ɵɵadvance(3);\n        i0.ɵɵtextInterpolate(ctx.titulo.nome_item);\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"formGroup\", ctx.formGroup);\n        i0.ɵɵadvance(8);\n        i0.ɵɵproperty(\"matDatepicker\", _r0);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"for\", _r0);\n        i0.ɵɵadvance(6);\n        i0.ɵɵproperty(\"matDatepicker\", _r1);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"for\", _r1);\n        i0.ɵɵadvance(6);\n        i0.ɵɵproperty(\"matDatepicker\", _r2);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"for\", _r2);\n        i0.ɵɵadvance(6);\n        i0.ɵɵpropertyInterpolate(\"value\", i0.ɵɵpipeBind2(37, 14, ctx.titulo.valor_tit, \"BRL\"));\n        i0.ɵɵadvance(13);\n        i0.ɵɵproperty(\"ngForOf\", ctx.contasFluxo);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngIf\", ctx.parcelas.length > 0);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.parcelas.length == 0);\n      }\n    },\n    styles: [\"h2[_ngcontent-%COMP%]{margin:0}h4[_ngcontent-%COMP%], h3[_ngcontent-%COMP%]{margin-top:-4px;margin-bottom:0;color:#0000008a}.sub-title[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between}.linha-2[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:space-between;margin-top:15px}form[_ngcontent-%COMP%]{width:60%;display:flex;align-items:center;gap:0 22px}mat-form-field[_ngcontent-%COMP%]{width:30%}mat-form-field[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{margin:0;padding:0}.estatico[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;width:35%}.content[_ngcontent-%COMP%]{margin-top:10px}tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child, th[_ngcontent-%COMP%]:last-child{text-align:end}.divisoria[_ngcontent-%COMP%]{border:.5px rgb(160,158,158) dashed}\"]\n  });\n  return DialogDetalheTituloComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}