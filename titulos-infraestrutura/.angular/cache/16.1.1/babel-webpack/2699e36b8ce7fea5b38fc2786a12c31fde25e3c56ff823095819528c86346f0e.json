{"ast":null,"code":"import { DialogContaFluxoComponent } from './../../dialogs/dialog-conta-fluxo/dialog-conta-fluxo.component';\nimport { DialogItemComponent } from './../../dialogs/dialog-item/dialog-item.component';\nimport { DialogFornecedorComponent } from './../../dialogs/dialog-fornecedor/dialog-fornecedor.component';\nimport { FormControl, Validators } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../services/titulos-services.service\";\nimport * as i2 from \"@angular/forms\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"@angular/material/dialog\";\nfunction CadastrarTituloComponent_mat_option_12_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-option\", 33);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const item_r9 = ctx.$implicit;\n    i0.ɵɵpropertyInterpolate(\"value\", item_r9.id);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\"\", item_r9.nome_interface, \" \");\n  }\n}\nfunction CadastrarTituloComponent_button_16_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r11 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 34);\n    i0.ɵɵlistener(\"click\", function CadastrarTituloComponent_button_16_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r11);\n      const ctx_r10 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView([ctx_r10.dados.nome_fornecedor = \"\", ctx_r10.dados.cod_fornecedor = \"\", ctx_r10.dados.nome_item = \"\"]);\n    });\n    i0.ɵɵelementStart(1, \"mat-icon\");\n    i0.ɵɵtext(2, \"close\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction CadastrarTituloComponent_button_17_mat_icon_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-icon\", 37);\n    i0.ɵɵtext(1, \"search \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction CadastrarTituloComponent_button_17_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r14 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 35);\n    i0.ɵɵlistener(\"click\", function CadastrarTituloComponent_button_17_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r14);\n      const ctx_r13 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r13.selecionarFornecedor());\n    });\n    i0.ɵɵtemplate(1, CadastrarTituloComponent_button_17_mat_icon_1_Template, 2, 0, \"mat-icon\", 36);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.dados.id_datasul && !ctx_r2.dados.cod_fornecedor);\n  }\n}\nfunction CadastrarTituloComponent_button_27_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r16 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 38);\n    i0.ɵɵlistener(\"click\", function CadastrarTituloComponent_button_27_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r16);\n      const ctx_r15 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r15.getItens());\n    });\n    i0.ɵɵelementStart(1, \"mat-icon\", 39);\n    i0.ɵɵtext(2, \"search\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction CadastrarTituloComponent_button_54_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r18 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 38);\n    i0.ɵɵlistener(\"click\", function CadastrarTituloComponent_button_54_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r18);\n      const ctx_r17 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r17.getContasFluxo());\n    });\n    i0.ɵɵelementStart(1, \"mat-icon\", 39);\n    i0.ɵɵtext(2, \"search\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction CadastrarTituloComponent_div_65_mat_card_subtitle_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-card-subtitle\");\n    i0.ɵɵtext(1, \"N\\u00E3o h\\u00E1 valores registrados para o t\\u00EDtulo\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction CadastrarTituloComponent_div_65_mat_card_subtitle_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-card-subtitle\");\n    i0.ɵɵtext(1, \"Lista de valores do T\\u00EDtulo\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction CadastrarTituloComponent_div_65_table_7_tr_9_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r27 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵpipe(5, \"currency\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"td\")(7, \"button\", 31);\n    i0.ɵɵlistener(\"click\", function CadastrarTituloComponent_div_65_table_7_tr_9_Template_button_click_7_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r27);\n      const row_r25 = restoredCtx.$implicit;\n      const ctx_r26 = i0.ɵɵnextContext(3);\n      return i0.ɵɵresetView(ctx_r26.removerValorPg(row_r25));\n    });\n    i0.ɵɵelementStart(8, \"mat-icon\");\n    i0.ɵɵtext(9, \"delete\");\n    i0.ɵɵelementEnd()()()();\n  }\n  if (rf & 2) {\n    const row_r25 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(row_r25.item_contaFluxo);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind2(5, 2, row_r25.item_valor, \"BRL\"));\n  }\n}\nfunction CadastrarTituloComponent_div_65_table_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"table\", 54)(1, \"thead\", 55)(2, \"th\");\n    i0.ɵɵtext(3, \"CONTA FLUXO\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"th\");\n    i0.ɵɵtext(5, \"VALOR\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"th\");\n    i0.ɵɵtext(7, \"A\\u00C7\\u00C3O\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(8, \"tbody\");\n    i0.ɵɵtemplate(9, CadastrarTituloComponent_div_65_table_7_tr_9_Template, 10, 5, \"tr\", 51);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r21 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(9);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r21.listaItensPgView);\n  }\n}\nfunction CadastrarTituloComponent_div_65_div_27_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r32 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\")(1, \"div\", 56)(2, \"span\");\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"mat-form-field\", 57)(5, \"mat-label\");\n    i0.ɵɵtext(6, \"Vencimento\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(7, \"input\", 58)(8, \"mat-datepicker-toggle\", 17)(9, \"mat-datepicker\", 18, 19);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"mat-form-field\", 57)(12, \"mat-label\");\n    i0.ɵɵtext(13, \"Valor\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(14, \"input\", 59, 60);\n    i0.ɵɵlistener(\"keyup\", function CadastrarTituloComponent_div_65_div_27_Template_input_keyup_14_listener() {\n      i0.ɵɵrestoreView(_r32);\n      i0.ɵɵnextContext();\n      const _r22 = i0.ɵɵreference(25);\n      const ctx_r31 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r31.mascaraMoedaParcela(_r22));\n    });\n    i0.ɵɵelementEnd()()()();\n  }\n  if (rf & 2) {\n    const item_r28 = ctx.$implicit;\n    const _r29 = i0.ɵɵreference(10);\n    const ctx_r23 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\"\", item_r28, \"\\u00BA Parcela\");\n    i0.ɵɵadvance(4);\n    i0.ɵɵpropertyInterpolate1(\"name\", \"dataParcela-\", item_r28, \"\");\n    i0.ɵɵproperty(\"matDatepicker\", _r29);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"for\", _r29);\n    i0.ɵɵadvance(6);\n    i0.ɵɵpropertyInterpolate1(\"name\", \"valorParcela-\", item_r28, \"\");\n    i0.ɵɵproperty(\"ngModel\", ctx_r23.vlParcelaInicial.valor);\n  }\n}\nfunction CadastrarTituloComponent_div_65_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r34 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 40)(1, \"mat-card\")(2, \"mat-card-title\");\n    i0.ɵɵtext(3, \"Valores\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(4, CadastrarTituloComponent_div_65_mat_card_subtitle_4_Template, 2, 0, \"mat-card-subtitle\", 41);\n    i0.ɵɵtemplate(5, CadastrarTituloComponent_div_65_mat_card_subtitle_5_Template, 2, 0, \"mat-card-subtitle\", 41);\n    i0.ɵɵelementStart(6, \"mat-card-content\", 42);\n    i0.ɵɵtemplate(7, CadastrarTituloComponent_div_65_table_7_Template, 10, 1, \"table\", 43);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"div\", 44)(9, \"h2\");\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(11, \"mat-card\")(12, \"div\", 45)(13, \"div\")(14, \"mat-card-title\");\n    i0.ɵɵtext(15, \"Parcelas\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(16, \"mat-card-subtitle\");\n    i0.ɵɵtext(17, \"Informe a data e valor da parcela.\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(18, \"div\")(19, \"mat-form-field\", 46)(20, \"mat-label\");\n    i0.ɵɵtext(21, \"Parcelas\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(22, \"input\", 47);\n    i0.ɵɵlistener(\"ngModelChange\", function CadastrarTituloComponent_div_65_Template_input_ngModelChange_22_listener($event) {\n      i0.ɵɵrestoreView(_r34);\n      const ctx_r33 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r33.qtdParc.num = $event);\n    })(\"keyup\", function CadastrarTituloComponent_div_65_Template_input_keyup_22_listener() {\n      i0.ɵɵrestoreView(_r34);\n      const _r22 = i0.ɵɵreference(25);\n      const ctx_r35 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r35.parcelas(ctx_r35.qtdParc.num, _r22));\n    })(\"keypress\", function CadastrarTituloComponent_div_65_Template_input_keypress_22_listener() {\n      i0.ɵɵrestoreView(_r34);\n      const _r22 = i0.ɵɵreference(25);\n      const ctx_r36 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r36.parcelas(ctx_r36.qtdParc.num, _r22));\n    })(\"click\", function CadastrarTituloComponent_div_65_Template_input_click_22_listener() {\n      i0.ɵɵrestoreView(_r34);\n      const _r22 = i0.ɵɵreference(25);\n      const ctx_r37 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r37.parcelas(ctx_r37.qtdParc.num, _r22));\n    });\n    i0.ɵɵelementEnd()()()();\n    i0.ɵɵelementStart(23, \"mat-card-content\")(24, \"form\", 48, 49);\n    i0.ɵɵlistener(\"ngSubmit\", function CadastrarTituloComponent_div_65_Template_form_ngSubmit_24_listener() {\n      i0.ɵɵrestoreView(_r34);\n      const _r22 = i0.ɵɵreference(25);\n      const ctx_r38 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r38.parcelasObj(_r22));\n    });\n    i0.ɵɵelementStart(26, \"div\", 50);\n    i0.ɵɵtemplate(27, CadastrarTituloComponent_div_65_div_27_Template, 16, 6, \"div\", 51);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(28, \"div\", 52)(29, \"h2\");\n    i0.ɵɵtext(30);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(31, \"button\", 53);\n    i0.ɵɵlistener(\"click\", function CadastrarTituloComponent_div_65_Template_button_click_31_listener() {\n      i0.ɵɵrestoreView(_r34);\n      const ctx_r39 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r39.salvarPagamento());\n    });\n    i0.ɵɵtext(32, \"Salvar\");\n    i0.ɵɵelementEnd()()()();\n    i0.ɵɵelement(33, \"mat-card-footer\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const _r22 = i0.ɵɵreference(25);\n    const ctx_r8 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngIf\", ctx_r8.listaItensPgView.length == 0);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r8.listaItensPgView.length != 0);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r8.listaItensPgView.length != 0);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\"Total: \", ctx_r8.valoresitens, \"\");\n    i0.ɵɵadvance(12);\n    i0.ɵɵproperty(\"ngModel\", ctx_r8.qtdParc.num);\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r8.qtdParcelas);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\"Total Parcelas: \", ctx_r8.totalParcelas, \"\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"disabled\", ctx_r8.listaItensPgView.length == 0 || !_r22.valid || ctx_r8.valoresitens != ctx_r8.totalParcelas);\n  }\n}\nexport let CadastrarTituloComponent = /*#__PURE__*/(() => {\n  class CadastrarTituloComponent {\n    constructor(_services, _fb, _router, _dialog) {\n      this._services = _services;\n      this._fb = _fb;\n      this._router = _router;\n      this._dialog = _dialog;\n      this.mask = [/\\d/, /\\d/, /\\d/, '.', /\\d/, /\\d/, /\\d/, '.', /\\d/, /\\d/, ',', /\\d/, /\\d/];\n      this.id_fn = new FormControl({\n        value: ''\n      }, Validators.required);\n      this.cod_forn = new FormControl({\n        value: ''\n      }, Validators.required);\n      this.id_item = new FormControl({\n        value: ''\n      }, Validators.required);\n      this.id_cf = new FormControl({\n        value: ''\n      }, Validators.required);\n      this.datasul = [];\n      this.fornecedores = [];\n      this.itens = [];\n      this.contas = [];\n      this.result = [];\n      this.dados = {};\n      this.formularioSend = {};\n      this.listaItensPg = [];\n      this.listaItensPgView = [];\n      this.objEnviado = [];\n      this.qtdParcelas = [1];\n      this.totalParcelas = 'R$ 0,00';\n      this.arrayParcelasObj = [];\n      this.qtdParc = {\n        num: 1\n      };\n      this.vlParcelaInicial = {\n        valor: 0\n      };\n    }\n    ngOnInit() {\n      this.formulario();\n      this.getInterface();\n      this.dadosObj();\n      // this.id_fn.reset({value: '', disabled: true})\n      // this.cod_forn.reset({value: '', disabled: true})\n      // this.id_item.reset({value: '', disabled: true})\n      // this.id_cf.reset({value: '', disabled: true})\n    }\n\n    formulario() {\n      this.formGroup = this._fb.group({\n        id_ds: ['', Validators.required],\n        id_fn: ['', Validators.required],\n        cod_forn: this.cod_forn,\n        id_item: this.id_item,\n        id_cf: this.id_cf,\n        dt_emissao: ['', Validators.required],\n        dt_venc: ['', Validators.required],\n        nf: ['', Validators.required],\n        valor: ['', Validators.required]\n      });\n    }\n    changeInterface(evento) {\n      if (evento.value) {\n        this.getFornecedores(evento.value);\n        this.dados.id_ds = evento.value;\n        this.dados.cod_fornecedor = '';\n        this.dados.nome_item = '';\n        this.dados.contaFluxo = '';\n        this.formularioSend.id_datasul = evento.value;\n        this.dados.nome_fornecedor = '';\n        this.formularioSend.nf = '';\n        this.formGroup.get('nf').reset({\n          value: '',\n          disabled: false\n        });\n      }\n      // if(!evento.value){\n      //   this.id_fn.reset({value: '', disabled: true})\n      // } else {\n      //   this.id_fn.reset({value: '', disabled: false})\n      // }\n    }\n\n    getFornecedores(id_ds) {\n      this._services.getFornecedores(id_ds).subscribe(data => {\n        this.fornecedores = data;\n      });\n    }\n    selecionarFornecedor() {\n      let datasul;\n      if (this.dados.id_datasul == '1') {\n        datasul = 'JORDANESIA';\n      } else {\n        datasul = 'LP ADM';\n      }\n      this._dialog.open(DialogFornecedorComponent, {\n        data: {\n          obj: this.fornecedores,\n          datasul: datasul\n        },\n        width: '65%'\n      }).afterClosed().subscribe(response => {\n        console.log(response);\n        if (response) {\n          this.dados.nome_fornecedor = response.nome_fornecedor;\n          this.dados.cod_fornecedor = response.cod_fornecedor;\n          this.dados.id_fornecedor = response.id_fornecedor;\n          this.formularioSend.id_fornecedor = response.id_fornecedor;\n        }\n      });\n    }\n    getInterface() {\n      this._services.getDatasul().subscribe(data => {\n        this.datasul = data;\n      });\n    }\n    getItens() {\n      const obj = {\n        id_datasul: this.dados.id_datasul,\n        id_fornecedor: this.dados.id_fornecedor\n      };\n      this._services.getItens(JSON.stringify(obj)).subscribe(response => {\n        console.log(response);\n        this.selectItem(response);\n      });\n    }\n    selectItem(data) {\n      this.itens = data;\n      this._dialog.open(DialogItemComponent, {\n        data: {\n          obj: this.itens\n        },\n        width: '60%'\n      }).afterClosed().subscribe(result => {\n        console.log(result);\n        this.dados.nome_item = result.nome_item;\n        this.formularioSend.id_item = result.id_item;\n      });\n    }\n    getContasFluxo() {\n      this._services.getContasFluxo(this.dados.id_datasul).subscribe(data => {\n        console.log(data);\n        this.selectConta(data);\n      });\n    }\n    selectConta(data) {\n      this.contas = data;\n      this._dialog.open(DialogContaFluxoComponent, {\n        data: {\n          obj: this.contas\n        },\n        width: '55%'\n      }).afterClosed().subscribe(result => {\n        this.dados.contaFluxo = `${result.num_cf} - ${result.nome_cf}`;\n        this.formularioSend.id_cf = result.id_cf;\n      });\n    }\n    mascaraMoeda() {\n      if (this.myModel == '0' || this.myModel == '') {\n        return;\n      }\n      var x = this.myModel.replace('.', '');\n      var y = parseFloat(x) / 100;\n      x = y.toFixed(2).toString();\n      this.myModel = x;\n      this.formularioSend.valor_item = this.myModel;\n    }\n    mascaraMoedaParcela(form) {\n      let vlTotalParcelas;\n      console.log(this.qtdParc.num);\n      for (let i = 1; i <= this.qtdParc.num; i++) {\n        var vlParcela = form.control.get(`valorParcela-${i}`).value;\n        console.log(form.control.get(`valorParcela-${i}`).value);\n        if (vlParcela == undefined || vlParcela == '0' || vlParcela == 0) {\n          vlParcela = 0;\n          form.control.get(`valorParcela-${i}`).setValue(vlParcela);\n        } else {\n          var x = vlParcela.replace('.', '');\n          var y = parseFloat(x) / 100;\n          x = y.toFixed(2).toString();\n          form.control.get(`valorParcela-${i}`).setValue(x);\n        }\n      }\n      this.arrayParcelasPagamentos(form);\n    }\n    arrayParcelasPagamentos(form) {\n      this.arrayParcelasObj = [];\n      var par = 1;\n      Object.keys(form.value).forEach(key => {\n        var valorPar = `valorParcela-${par}`;\n        console.log(valorPar, key);\n        if (valorPar == key) {\n          this.arrayParcelasObj.push({\n            parcela: par,\n            dataParcela: this.dataParcela(form.controls[`dataParcela-${par}`].value),\n            valorParcela: form.controls[key].value\n          });\n          par = par + 1;\n        }\n      });\n      console.log(this.arrayParcelasObj);\n      this.ValorTotalParcelasFormatado();\n    }\n    ValorTotalParcelasFormatado() {\n      var vlTotalParcelas = this.arrayParcelasObj.map(obj => {\n        var t = parseFloat(obj.valorParcela).toFixed(2);\n        var n = parseFloat(t);\n        return n;\n      }).reduce((ant, atu) => ant + atu, 0).toFixed(2);\n      var num = parseFloat(vlTotalParcelas);\n      this.totalParcelas = num.toLocaleString('pt-BR', {\n        style: 'currency',\n        currency: 'BRL'\n      });\n    }\n    dadosObj() {\n      this.dados.id_datasul = '';\n      this.dados.id_fornecedor = '';\n      this.dados.cod_fornecedor = '';\n      this.dados.nome_item = '';\n      this.dados.nome_fornecedor = '';\n      this.dados.contaFluxo = '';\n      this.formularioSend.valor_item = '';\n      this.formularioSend.id_datasul = '';\n      this.formularioSend.id_fornecedor = '';\n      this.formularioSend.data_emissao = '';\n      this.formularioSend.data_venc = '';\n      this.formularioSend.nf = '';\n      this.formularioSend.id_cf = '';\n      this.formularioSend.id_item = '';\n      this.listaItensPgView = [];\n      this.valoresitens = 'R$ 0,00';\n      this.valorPgFinal = 0;\n      this.formGroup.get('nf').reset({\n        value: '',\n        disabled: false\n      });\n    }\n    salvarItemPagamento() {\n      this.formGroup.get('nf').reset({\n        value: this.formularioSend.nf,\n        disabled: true\n      });\n      const objView = {\n        item_contaFluxo: this.dados.contaFluxo,\n        item_valor: this.formularioSend.valor_item,\n        id_cf_item_pg: this.formularioSend.id_cf,\n        valor_item_pg: this.formularioSend.valor_item\n      };\n      let objS = {\n        item_contaFluxo: this.dados.contaFluxo,\n        item_valor: this.formularioSend.valor_item,\n        id_cf_item_pg: this.formularioSend.id_cf,\n        valor_item_pg: this.formularioSend.valor_item\n      };\n      this.objEnviado.push(objS);\n      console.log(this.objEnviado);\n      this.listaItensPagamento(objView);\n    }\n    listaItensPagamento(objView) {\n      this.listaItensPgView.push(objView);\n      console.log(this.listaItensPgView);\n      var text = this.listaItensPgView.map(valor => {\n        var t = parseFloat(valor.item_valor).toFixed(2);\n        var n = parseFloat(t);\n        return n;\n      }).reduce((ant, atu) => ant + atu, 0).toFixed(2);\n      var num = parseFloat(text);\n      this.valorPgFinal = num;\n      this.valoresitens = num.toLocaleString('pt-BR', {\n        style: 'currency',\n        currency: 'BRL'\n      });\n      this.dados.contaFluxo = '';\n      this.formGroup.get('valor').reset();\n      this.formGroup.get('id_cf').reset();\n    }\n    salvarPagamento() {\n      const objBanco = {\n        id_datasul: this.formularioSend.id_datasul,\n        id_fornecedor: this.formularioSend.id_fornecedor,\n        id_item: this.formularioSend.id_item,\n        data_emissao: this.getDataEmissao(),\n        data_venc: this.getDataVenc(),\n        nf: this.formularioSend.nf,\n        valorPgTotal: this.valorPgFinal,\n        status: 'Cadastrado'\n      };\n      this._services.setTitulo(JSON.stringify(objBanco)).subscribe(result => {\n        console.log(result);\n        this.result = result;\n        if (this.result.error) {\n          this.formGroup.get('nf').reset({\n            value: this.formularioSend.nf,\n            disabled: false\n          });\n          return this._services.exibirMsgErro(this.result.error);\n        } else {\n          this._services.setItensTitulo(JSON.stringify(this.objEnviado)).subscribe(result => {\n            this.result = result;\n            if (this.result.error) {\n              this._services.exibirMsgErro(this.result.error);\n            } else {\n              this._services.setparcelas(JSON.stringify(this.arrayParcelasObj)).subscribe(result => {\n                console.log(result);\n                this._router.navigate(['/titulos']);\n                this._services.exibirMsgSucesso('Titulo cadastrado com Sucesso!!');\n                this.dadosObj();\n              });\n              // this._router.navigate(['/titulos'])\n              // this._services.exibirMsgSucesso('Titulo cadastrado com Sucesso!!')\n              // this.dadosObj()\n            }\n          });\n        }\n      });\n    }\n\n    getDataEmissao() {\n      let data = new Date(this.formularioSend.data_emissao);\n      let ano = data.getFullYear();\n      let mes = data.getMonth() + 1;\n      let dia = data.getDate();\n      if (mes <= 9) {\n        mes = `0${mes}`;\n      }\n      if (dia <= 9) {\n        dia = `0${dia}`;\n      }\n      return `${ano}-${mes}-${dia}`;\n    }\n    getDataVenc() {\n      let data = new Date(this.formularioSend.data_venc);\n      let ano = data.getFullYear();\n      let mes = data.getMonth() + 1;\n      let dia = data.getDate();\n      if (mes <= 9) {\n        mes = `0${mes}`;\n      }\n      if (dia <= 9) {\n        dia = `0${dia}`;\n      }\n      return `${ano}-${mes}-${dia}`;\n    }\n    dataParcela(dataParcela) {\n      let data = new Date(dataParcela);\n      let ano = data.getFullYear();\n      let mes = data.getMonth() + 1;\n      let dia = data.getDate();\n      if (mes <= 9) {\n        mes = `0${mes}`;\n      }\n      if (dia <= 9) {\n        dia = `0${dia}`;\n      }\n      return `${ano}-${mes}-${dia}`;\n    }\n    removerValorPg(index) {\n      console.log(index);\n      var i = this.listaItensPgView.indexOf(index);\n      this.listaItensPgView.splice(i, 1);\n      this.objEnviado.splice(i, 1);\n      var text = this.listaItensPgView.map(valor => {\n        var t = parseFloat(valor.item_valor).toFixed(2);\n        var n = parseFloat(t);\n        return n;\n      }).reduce((ant, atu) => ant + atu, 0).toFixed(2);\n      var num = parseFloat(text);\n      this.valorPgFinal = num;\n      this.valoresitens = num.toLocaleString('pt-BR', {\n        style: 'currency',\n        currency: 'BRL'\n      });\n    }\n    parcelas(inputNumParc, form) {\n      form.reset();\n      if (inputNumParc == 0 || !inputNumParc || inputNumParc == '') {\n        this.qtdParc.num = 1;\n        return this.qtdParcelas = [1];\n      }\n      this.qtdParcelas = [];\n      for (let i = 1; i <= inputNumParc; i++) {\n        this.qtdParcelas.push(i);\n      }\n      // this.mascaraMoedaParcela(form)\n      this.totalParcelas = 'R$ 0,00';\n    }\n    parcelasObj(form) {\n      console.log(form);\n    }\n  }\n  CadastrarTituloComponent.ɵfac = function CadastrarTituloComponent_Factory(t) {\n    return new (t || CadastrarTituloComponent)(i0.ɵɵdirectiveInject(i1.TitulosServicesService), i0.ɵɵdirectiveInject(i2.FormBuilder), i0.ɵɵdirectiveInject(i3.Router), i0.ɵɵdirectiveInject(i4.MatDialog));\n  };\n  CadastrarTituloComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: CadastrarTituloComponent,\n    selectors: [[\"app-cadastrar-titulo\"]],\n    decls: 66,\n    vars: 26,\n    consts: [[2, \"margin-top\", \"30px\"], [3, \"formGroup\"], [1, \"row\"], [\"appearance\", \"outline\", 1, \"datasul\"], [\"formControlName\", \"id_ds\", 3, \"ngModel\", \"selectionChange\", \"ngModelChange\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [\"appearance\", \"outline\", 1, \"fornecedor\"], [\"matSuffix\", \"\", \"mat-icon-button\", \"\", \"color\", \"warn\", 3, \"click\", 4, \"ngIf\"], [\"matSuffix\", \"\", \"mat-icon-button\", \"\", \"color\", \"primary\", 3, \"click\", 4, \"ngIf\"], [\"matInput\", \"\", \"formControlName\", \"id_fn\", \"type\", \"text\", \"readonly\", \"\", 3, \"ngModel\", \"ngModelChange\"], [\"appearance\", \"outline\", 1, \"cod_fornecedor\"], [\"matInput\", \"\", \"type\", \"text\", \"formControlName\", \"cod_forn\", \"readonly\", \"\", 3, \"ngModel\", \"ngModelChange\"], [\"appearance\", \"outline\", 1, \"item\"], [\"matInput\", \"\", \"formControlName\", \"id_item\", \"type\", \"text\", \"readonly\", \"\", 3, \"ngModel\", \"ngModelChange\"], [\"mat-icon-button\", \"\", \"matSuffix\", \"\", \"color\", \"primary\", 3, \"click\", 4, \"ngIf\"], [\"appearance\", \"outline\", 1, \"data\"], [\"matInput\", \"\", \"formControlName\", \"dt_emissao\", \"disabled\", \"\", 3, \"matDatepicker\", \"ngModel\", \"ngModelChange\"], [\"matSuffix\", \"\", 3, \"for\"], [\"disabled\", \"false\"], [\"dp3\", \"\"], [\"matInput\", \"\", \"formControlName\", \"dt_venc\", \"disabled\", \"\", 3, \"matDatepicker\", \"ngModel\", \"ngModelChange\"], [\"dp2\", \"\"], [\"appearance\", \"outline\", 1, \"nf\"], [\"matInput\", \"\", \"formControlName\", \"nf\", 3, \"ngModel\", \"ngModelChange\"], [\"appearance\", \"outline\", 1, \"conta-fluxo\"], [\"matInput\", \"\", \"formControlName\", \"id_cf\", \"type\", \"text\", \"readonly\", \"\", 3, \"ngModel\", \"ngModelChange\"], [\"appearance\", \"outline\", 1, \"valor\"], [\"matInput\", \"\", \"formControlName\", \"valor\", 3, \"ngModel\", \"ngModelChange\", \"keyup\"], [\"input\", \"\"], [\"align\", \"end\", 2, \"padding\", \"0\"], [\"mat-button\", \"\", \"color\", \"primary\", 3, \"disabled\", \"click\"], [\"mat-button\", \"\", \"color\", \"warn\", 3, \"click\"], [\"class\", \"card-itens-parcelas\", 4, \"ngIf\"], [3, \"value\"], [\"matSuffix\", \"\", \"mat-icon-button\", \"\", \"color\", \"warn\", 3, \"click\"], [\"matSuffix\", \"\", \"mat-icon-button\", \"\", \"color\", \"primary\", 3, \"click\"], [\"color\", \"primary\", \"class\", \"icon-search\", 4, \"ngIf\"], [\"color\", \"primary\", 1, \"icon-search\"], [\"mat-icon-button\", \"\", \"matSuffix\", \"\", \"color\", \"primary\", 3, \"click\"], [\"mat-icon-button\", \"\", \"matSuffix\", \"\"], [1, \"card-itens-parcelas\"], [4, \"ngIf\"], [1, \"content-table\"], [\"class\", \"table table-sm table-striped\", 4, \"ngIf\"], [1, \"footer\"], [1, \"titulo-parcelas\"], [\"appearance\", \"outline\", 1, \"parcelas\"], [\"matInput\", \"\", \"type\", \"number\", \"min\", \"1\", 3, \"ngModel\", \"ngModelChange\", \"keyup\", \"keypress\", \"click\"], [3, \"ngSubmit\"], [\"form\", \"ngForm\"], [1, \"container-parcelas\"], [4, \"ngFor\", \"ngForOf\"], [1, \"btn-salvar\"], [\"mat-button\", \"\", \"color\", \"primary\", \"cdkFocusInitial\", \"\", 3, \"disabled\", \"click\"], [1, \"table\", \"table-sm\", \"table-striped\"], [1, \"thead-light\"], [1, \"row-parcela\"], [\"appearance\", \"outline\", 1, \"input-parcela\"], [\"matInput\", \"\", \"ngModel\", \"\", \"required\", \"\", 3, \"matDatepicker\", \"name\"], [\"matInput\", \"\", \"required\", \"\", 3, \"name\", \"ngModel\", \"keyup\"], [\"valorParcela\", \"ngModel\"]],\n    template: function CadastrarTituloComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"mat-card\")(1, \"mat-card-title\");\n        i0.ɵɵtext(2, \"Cadastrar novo T\\u00EDtulo\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(3, \"mat-card-subtitle\");\n        i0.ɵɵtext(4, \"informe os dados do T\\u00EDtulo\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(5, \"mat-card-content\", 0)(6, \"form\", 1)(7, \"div\", 2)(8, \"mat-form-field\", 3)(9, \"mat-label\");\n        i0.ɵɵtext(10, \"Datasul\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(11, \"mat-select\", 4);\n        i0.ɵɵlistener(\"selectionChange\", function CadastrarTituloComponent_Template_mat_select_selectionChange_11_listener($event) {\n          return ctx.changeInterface($event);\n        })(\"ngModelChange\", function CadastrarTituloComponent_Template_mat_select_ngModelChange_11_listener($event) {\n          return ctx.dados.id_datasul = $event;\n        });\n        i0.ɵɵtemplate(12, CadastrarTituloComponent_mat_option_12_Template, 2, 2, \"mat-option\", 5);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(13, \"mat-form-field\", 6)(14, \"mat-label\");\n        i0.ɵɵtext(15, \"Fornecedor\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(16, CadastrarTituloComponent_button_16_Template, 3, 0, \"button\", 7);\n        i0.ɵɵtemplate(17, CadastrarTituloComponent_button_17_Template, 2, 1, \"button\", 8);\n        i0.ɵɵelementStart(18, \"input\", 9);\n        i0.ɵɵlistener(\"ngModelChange\", function CadastrarTituloComponent_Template_input_ngModelChange_18_listener($event) {\n          return ctx.dados.nome_fornecedor = $event;\n        });\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(19, \"mat-form-field\", 10)(20, \"mat-label\");\n        i0.ɵɵtext(21, \"C\\u00F3digo do Fornecedor\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(22, \"input\", 11);\n        i0.ɵɵlistener(\"ngModelChange\", function CadastrarTituloComponent_Template_input_ngModelChange_22_listener($event) {\n          return ctx.dados.cod_fornecedor = $event;\n        });\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(23, \"mat-form-field\", 12)(24, \"mat-label\");\n        i0.ɵɵtext(25, \"Item\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(26, \"input\", 13);\n        i0.ɵɵlistener(\"ngModelChange\", function CadastrarTituloComponent_Template_input_ngModelChange_26_listener($event) {\n          return ctx.dados.nome_item = $event;\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(27, CadastrarTituloComponent_button_27_Template, 3, 0, \"button\", 14);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(28, \"div\", 2)(29, \"mat-form-field\", 15)(30, \"mat-label\");\n        i0.ɵɵtext(31, \"Emiss\\u00E3o\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(32, \"input\", 16);\n        i0.ɵɵlistener(\"ngModelChange\", function CadastrarTituloComponent_Template_input_ngModelChange_32_listener($event) {\n          return ctx.formularioSend.data_emissao = $event;\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(33, \"mat-datepicker-toggle\", 17)(34, \"mat-datepicker\", 18, 19);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(36, \"mat-form-field\", 15)(37, \"mat-label\");\n        i0.ɵɵtext(38, \"Vencimento\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(39, \"input\", 20);\n        i0.ɵɵlistener(\"ngModelChange\", function CadastrarTituloComponent_Template_input_ngModelChange_39_listener($event) {\n          return ctx.formularioSend.data_venc = $event;\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(40, \"mat-hint\");\n        i0.ɵɵtext(41);\n        i0.ɵɵpipe(42, \"date\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(43, \"mat-datepicker-toggle\", 17)(44, \"mat-datepicker\", 18, 21);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(46, \"mat-form-field\", 22)(47, \"mat-label\");\n        i0.ɵɵtext(48, \"NF\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(49, \"input\", 23);\n        i0.ɵɵlistener(\"ngModelChange\", function CadastrarTituloComponent_Template_input_ngModelChange_49_listener($event) {\n          return ctx.formularioSend.nf = $event;\n        });\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(50, \"mat-form-field\", 24)(51, \"mat-label\");\n        i0.ɵɵtext(52, \"Conta Fluxo\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(53, \"input\", 25);\n        i0.ɵɵlistener(\"ngModelChange\", function CadastrarTituloComponent_Template_input_ngModelChange_53_listener($event) {\n          return ctx.dados.contaFluxo = $event;\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(54, CadastrarTituloComponent_button_54_Template, 3, 0, \"button\", 14);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(55, \"mat-form-field\", 26)(56, \"mat-label\");\n        i0.ɵɵtext(57, \"Valor\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(58, \"input\", 27, 28);\n        i0.ɵɵlistener(\"ngModelChange\", function CadastrarTituloComponent_Template_input_ngModelChange_58_listener($event) {\n          return ctx.myModel = $event;\n        })(\"keyup\", function CadastrarTituloComponent_Template_input_keyup_58_listener() {\n          return ctx.mascaraMoeda();\n        });\n        i0.ɵɵelementEnd()()()()();\n        i0.ɵɵelementStart(60, \"mat-card-actions\", 29)(61, \"button\", 30);\n        i0.ɵɵlistener(\"click\", function CadastrarTituloComponent_Template_button_click_61_listener() {\n          return ctx.salvarItemPagamento();\n        });\n        i0.ɵɵtext(62, \"Salvar\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(63, \"button\", 31);\n        i0.ɵɵlistener(\"click\", function CadastrarTituloComponent_Template_button_click_63_listener() {\n          return ctx.dadosObj();\n        });\n        i0.ɵɵtext(64, \"Limpar\");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵtemplate(65, CadastrarTituloComponent_div_65_Template, 34, 8, \"div\", 32);\n      }\n      if (rf & 2) {\n        const _r4 = i0.ɵɵreference(35);\n        const _r5 = i0.ɵɵreference(45);\n        i0.ɵɵadvance(6);\n        i0.ɵɵproperty(\"formGroup\", ctx.formGroup);\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"ngModel\", ctx.dados.id_datasul);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngForOf\", ctx.datasul);\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngIf\", ctx.dados.cod_fornecedor);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.dados.id_datasul && !ctx.dados.cod_fornecedor);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngModel\", ctx.dados.nome_fornecedor);\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngModel\", ctx.dados.cod_fornecedor);\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngModel\", ctx.dados.nome_item);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.dados.nome_fornecedor);\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"matDatepicker\", _r4)(\"ngModel\", ctx.formularioSend.data_emissao);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"for\", _r4);\n        i0.ɵɵadvance(6);\n        i0.ɵɵproperty(\"matDatepicker\", _r5)(\"ngModel\", ctx.formularioSend.data_venc);\n        i0.ɵɵadvance(2);\n        i0.ɵɵtextInterpolate(i0.ɵɵpipeBind3(42, 22, ctx.formGroup.value.dt_venc, \"EEEE\", \"pt-BR\"));\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"for\", _r5);\n        i0.ɵɵadvance(6);\n        i0.ɵɵproperty(\"ngModel\", ctx.formularioSend.nf);\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngModel\", ctx.dados.contaFluxo);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.dados.id_datasul);\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngModel\", ctx.myModel);\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"disabled\", !ctx.formGroup.valid);\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngIf\", ctx.listaItensPgView.length != 0);\n      }\n    },\n    styles: [\"form[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between}.mat-icon-button[_ngcontent-%COMP%]{display:initial}.row[_ngcontent-%COMP%]{display:flex;width:100%;justify-content:space-between}.row[_ngcontent-%COMP%]   .datasul[_ngcontent-%COMP%]{width:18%}.row[_ngcontent-%COMP%]   .fornecedor[_ngcontent-%COMP%]{width:38%}.cod_fornecedor[_ngcontent-%COMP%]{width:13%}.item[_ngcontent-%COMP%]{width:26%}.conta-fluxo[_ngcontent-%COMP%]{width:30%}.nf[_ngcontent-%COMP%]{width:15%}.valor[_ngcontent-%COMP%]{width:14%}.data[_ngcontent-%COMP%]{width:12%}.parcelas[_ngcontent-%COMP%]{width:100%}mat-card[_ngcontent-%COMP%]{border-top:3px solid #3f51b5;margin-bottom:20px}.content-table[_ngcontent-%COMP%]{margin-top:10px}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{text-align:left}tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{vertical-align:middle}tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{text-align:center}thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:last-child{text-align:center}.footer[_ngcontent-%COMP%], .card-itens-parcelas[_ngcontent-%COMP%], .titulo-parcelas[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between}.container-parcelas[_ngcontent-%COMP%]{max-height:233px;overflow-y:auto}.card-itens-parcelas[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]{width:49%;height:390px}.row-parcela[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:2px;width:100%}.input-parcela[_ngcontent-%COMP%]{width:33%}.btn-salvar[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between}\"]\n  });\n  return CadastrarTituloComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}